<VirtualHost *:80>

        ServerName localhost

        DocumentRoot /var/www/html

        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined

        <Directory /var/www/html>
                Order allow,deny
                Allow from all
        </Directory>

        WSGIApplicationGroup %{GLOBAL}

        # EIDA StationLite Webservice
        WSGIDaemonProcess stationlite user=www-data group=www-data  processes=5 threads=5 python-home=/var/www/stationlite/venv3 display-name=%{GROUP}
        WSGIScriptAlias /eidaws/routing /var/www/mediatorws/apache2/stationlite.wsgi/eidaws/routing

        <Location "/eidaws/routing">
            WSGIProcessGroup stationlite
        </Location>

        <Directory "/var/www/mediatorws/eidangservices/stationlite">
            WSGIScriptReloading On
            <IfVersion < 2.4>
                Order allow,deny
                Allow from all
            </IfVersion>
            <IfVersion >= 2.4>
                Require all granted
            </IfVersion>
        </Directory>

        # EIDA Federator Webservice
        WSGIDaemonProcess federator user=www-data group=www-data processes=10 threads=3 python-home=/var/www/federator/venv3 display-name=%{GROUP}
        WSGIScriptAlias /fdsnws /var/www/mediatorws/apache2/federator.wsgi/fdsnws
        WSGIScriptAlias /eidaws/wfcatalog /var/www/mediatorws/apache2/federator.wsgi/eidaws/wfcatalog

        CacheLock               on
        CacheLockPath           /tmp/mod_cache-noa-lock
        CacheLockMaxAge         30

        CacheIgnoreNoLastMod    on
        CacheStoreExpired       on

        # Cache regex e.g. via LocationMatch (normal handler only)
        CacheQuickHandler       off

        # Cache fdsnws-station
        <LocationMatch "^/fdsnws/station/">
          # XXX(damb): Caching applies only to GET requests.
          CacheEnable disk
          CacheHeader           on
          CacheDetailHeader     on

          # Cache for up 12 hours
          CacheMaxExpire 43200
          # On cache miss, forward the request to mod_wsgi
          WSGIProcessGroup federator
        </LocationMatch>

        <LocationMatch "^/(fdsnws/dataselect|eidaws/wfcatalog)">
            WSGIProcessGroup federator
        </LocationMatch>

        <Directory "/var/www/mediatorws/eidangservices/federator">
            WSGIScriptReloading On
            <IfVersion < 2.4>
                Order allow,deny
                Allow from all
            </IfVersion>
            <IfVersion >= 2.4>
                Require all granted
            </IfVersion>
        </Directory>

        #LogLevel info
        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined

</VirtualHost>
